# frost-page-title
The frost-page-title `addon` primarily provides a Route Mixin for dynamically handling page titles. The Mixin uses a simple service to build up and store title values for updating the dynamically whenever an application's router transitions, and its initializers setup the app with the default page title behavior if a default title is given in the app's config.

* [Basic Usage](#basic-usage)
* [Initializers](#initializers)
* [Mixin](#mixin)
* [Service](#service)
* [Examples](#examples)

## Basic Usage
The simplest way to use the frost-page-title `addon` is to set an app's default title on the `APP['frost-page-title-default']` property in `config/environment.js`, and __remove the title tag__ from the app's index.html, as the title will be set on build by the initializer.
```
// config/environment.js
...
	APP: {
      'frost-page-title-default': 'My App'
      ...
    }
...
```
```
// app/index.html - remove title tag
...
- <title>My App</title>
+
...
```

## Initializers
The application initializer injects the `frost-page-title` service on an application's router. The instance initializer automatically sets up the application to use the frost-page-title-service if the the `config/environment.js` file has `frost-page-title-default` set on the `APP` object and wrap's the router's `willTransition` and `didTransition` hooks to use the service to update the page title.

## Mixin
The frost-page-title mixin provides a simple api for dynamically updating the title based on the routes that are activated in a router transition. When the `activate` hook is called on a route using the mixin, if it has a `frostPageTitle` handler function, that function will be called with an array of title sections generated by the last `frostPageTitle` handler that was called and the default title. If no parent route has a handler, its handler will be passed the result of the default handler. Likewise, this function should return an array of title sections. The result of the last handler called will be used by the service to update the page title.
```
// my-route.js
import FrostPageTitleMixin from 'ember-frost-core/mixins/frost-page-title'
...
export default Route.extend(FrostPageTitleMixin, {
...
  frostPageTitle (sections, defaultTitle) {
    // will simply append 'My Route' to the title
    sections.push('My Route')
    return sections	   
  }
...
})
```

## Service
The service provides a `default handler` and an `update` function for updating the page title. 

### Default Handler
The Default handler takes `window.location.hash`, splits it on each `/`, discards anything that doesn't look like words, converting each `-` into a space and capitalizing each word. Example: `/myapp/#/foo-bar/baz` would become `['foo bar', 'baz']`, which the update method would convert to a page title of `Foo Bar | Baz`.

### #update()
The update function simply takes the `sections` array generated by the successive handlers and joins them with ` | ` (see example above).

## Examples

### Default
```
// config/environment.js
...
	APP: {
      'frost-page-title-default': 'My App'
      ...
    }
...
```
Example Routes:

| Url | Title |
| --- | ----- |
| /myapp/#/foo/bar | Foo \| Bar |
| /myapp/#/ | My App |

### Override Default Behavior
```
// config/environment.js
...
	APP: {
      'frost-page-title-default': 'My App'
      ...
    }
...
```
```
// app/pods/application/route.js
// use top level route to override everywhere
import FrostPageTitleMixin from 'ember-frost-core/mixins/frost-page-title'
...
export default Route.extend(FrostPageTitleMixin, {
...
  frostPageTitle (sections, defaultTitle) {
    // special url mapping
    const sections = window.location.hash.split('/')
    return sections.map(section => section.reverse)
  }
...
})
```
Example Routes:

| Url | Title |
| --- | ----- |
| /myapp/#/foo/bar | oof \| rab |
| /myapp/#/ | My App |

### Additive Nested Titles

```
// config/environment.js
...
	APP: {
      'frost-page-title-default': 'My App'
      ...
    }
...
```
```
// app/pods/parent/route.js
import FrostPageTitleMixin from 'ember-frost-core/mixins/frost-page-title'
...
export default Route.extend(FrostPageTitleMixin, {
...
  frostPageTitle (sections, defaultTitle) {
    return [defaultTitlte, 'Parent']
  }
...
})
```
```
// app/pods/child/route.js
import FrostPageTitleMixin from 'ember-frost-core/mixins/frost-page-title'
...
export default Route.extend(FrostPageTitleMixin, {
...
  frostPageTitle (sections, defaultTitle) {
    return [sections, 'Child']
  }
...
})
```
Example Routes:

| Url | Title |
| --- | ----- |
| /myapp/#/parent | My App \| Parent |
| /myapp/#/parent/child | My App \| Parent \| Child |
| /myapp/#/ | My App |
